# Руководство по запуску автотестов с использованием PyCharm и Docker

## Введение

Этот документ описывает, как запускать автотесты для проекта DocQA с использованием PyCharm и Docker. Виртуальное окружение находится в Docker-контейнере, и тесты должны запускаться в этом окружении.

## Предварительные требования

1. **Docker**: Убедитесь, что Docker установлен и запущен на вашей системе.
2. **PyCharm**: Установите PyCharm Professional или Community Edition.
3. **Docker Plugin**: Убедитесь, что плагин Docker установлен в PyCharm.

## Настройка проекта в PyCharm

1. **Клонирование проекта**:
   - Клонируйте репозиторий проекта на ваш локальный компьютер.
   - Откройте проект в PyCharm.

2. **Настройка Docker**:
   - Убедитесь, что Docker запущен и доступен.
   - Откройте настройки Docker в PyCharm: `File > Settings > Build, Execution, Deployment > Docker`.
   - Убедитесь, что Docker подключен и настроен правильно.

3. **Настройка интерпретатора Python**:
   - Откройте настройки проекта: `File > Settings > Project: DocQA > Python Interpreter`.
   - Нажмите на шестеренку и выберите `Add...`.
   - Выберите `Docker` и настройте интерпретатор для использования контейнера с виртуальным окружением.
   - Укажите путь к Docker-контейнеру и виртуальному окружению внутри него.

## Запуск автотестов

1. **Настройка конфигурации тестов**:
   - Откройте `Run/Debug Configurations` в PyCharm.
   - Нажмите на `+` и выберите `Python tests > pytest`.
   - Настройте конфигурацию следующим образом:
     - **Target**: Выберите `Script path` и укажите путь к файлу `tests/test_api.py`.
     - **Python interpreter**: Выберите интерпретатор Docker, который вы настроили ранее.
     - **Working directory**: Укажите корневую директорию проекта.
     - **Additional arguments**: Дополнительные аргументы для pytest, если необходимо.

2. **Запуск тестов**:
   - Нажмите на кнопку `Run` или `Debug` в верхней панели PyCharm.
   - Тесты будут запущены в Docker-контейнере с использованием виртуального окружения.

3. **Просмотр результатов**:
   - Результаты тестов будут отображены в окне `Run` или `Debug` в PyCharm.
   - Вы можете просмотреть детали выполнения тестов, включая прошедшие и неудачные тесты.

## Запуск тестов из командной строки

Если вы предпочитаете запускать тесты из командной строки, вы можете использовать следующую команду:

```bash
# Подключитесь к Docker-контейнеру с виртуальным окружением
docker exec -it <container_name> bash

# Перейдите в директорию проекта
cd /path/to/project

# Запустите тесты
pytest tests/
```

## Примеры конфигураций

### Пример конфигурации для PyCharm

```json
{
  "name": "DocQA Tests",
  "type": "pytest",
  "target": "script",
  "script": "tests/test_api.py",
  "interpreter": "docker://<container_name>/path/to/venv/bin/python",
  "workingDirectory": "/path/to/project",
  "additionalArguments": ""
}
```

### Пример команды для запуска тестов

```bash
pytest tests/test_api.py -v
```

## Заключение

Следуя этому руководству, вы сможете легко запускать автотесты для проекта DocQA с использованием PyCharm и Docker. Если у вас возникнут вопросы или проблемы, обратитесь к документации PyCharm или Docker.